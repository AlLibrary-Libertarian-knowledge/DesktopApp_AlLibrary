echo "üìù Post-commit hook running..."

# Determine commit type from commit message
COMMIT_MSG=$(git log -1 --pretty=%B)
COMMIT_TYPE=""

case "$COMMIT_MSG" in
  feat*) COMMIT_TYPE="feature" ;;
  fix*) COMMIT_TYPE="bug fix" ;;
  docs*) COMMIT_TYPE="documentation" ;;
  style*) COMMIT_TYPE="style change" ;;
  refactor*) COMMIT_TYPE="refactor" ;;
  test*) COMMIT_TYPE="test" ;;
  chore*) COMMIT_TYPE="maintenance" ;;
  *) COMMIT_TYPE="change" ;;
esac

# Get current branch
BRANCH=$(git rev-parse --abbrev-ref HEAD)

# Provide contextual feedback
echo "üêõ $COMMIT_TYPE committed!"
case "$COMMIT_TYPE" in
  "feature")
    echo "Consider:"
    echo "  - Adding tests for the new feature"
    echo "  - Updating documentation"
    echo "  - Checking if migration scripts are needed"
    ;;
  "bug fix")
    echo "Consider:"
    echo "  - Adding regression tests"
    echo "  - Updating documentation if needed"
    ;;
  "documentation")
    echo "Great! Documentation improvements help everyone."
    ;;
  "test")
    echo "Excellent! More tests = more confidence."
    ;;
esac

echo ""
echo "üí° Next steps:"
if [ "$BRANCH" = "main" ] || [ "$BRANCH" = "master" ]; then
  echo "  - Consider creating a release tag if this is release-ready"
  echo "  - Ensure CI/CD pipeline completes successfully"
else
  echo "  - Continue development on this branch"
  echo "  - When ready, create a pull request to merge into main"
  echo "  - Current branch: $BRANCH"
fi

echo "‚úÖ Post-commit actions completed!" 